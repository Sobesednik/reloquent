{"version":3,"sources":["../../src/lib/ask.js"],"names":["ask","question","timeout","rl","input","process","stdin","output","stdout","rejectQuestion","promise","Promise","resolve","reject","Error","answer","p","then","res","close","err"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA;;;;;AAKe,SAASA,GAAT,CAAaC,QAAb,EAAuBC,OAAvB,EAAgC;AAC7C,QAAMC,KAAK,+BAAgB;AACzBC,WAAOC,QAAQC,KADU;AAEzBC,YAAQF,QAAQG;AAFS,GAAhB,CAAX;AAIA,MAAIC,cAAJ;AACA,QAAMC,UAAU,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/CJ,qBAAiB,MAAM;AACrBI,aAAO,IAAIC,KAAJ,CAAU,uBAAV,CAAP,EADqB,CACsB;AAC5C,KAFD;;AAGAX,OAAGF,QAAH,CAAYA,QAAZ,EAAuBc,MAAD,IAAY;AAChCH,cAAQG,MAAR;AACD,KAFD;AAGD,GAPe,CAAhB;AAQA,QAAMC,IAAId,UAAU,qBAAOQ,OAAP,EAAgBR,OAAhB,EAA0B,cAAaD,QAAS,EAAhD,CAAV,GAA+DS,OAAzE;AACAP,KAAGO,OAAH,GAAaM,EAAEC,IAAF,CACVC,GAAD,IAAS;AACPf,OAAGgB,KAAH;AACAV;AACA,WAAOS,GAAP;AACD,GALU,EAMVE,GAAD,IAAS;AACPjB,OAAGgB,KAAH;AACAV;AACA,UAAMW,GAAN;AACD,GAVU,CAAb;AAYA,SAAOjB,EAAP;AACD","sourcesContent":["import { createInterface } from 'readline'\nimport promto from 'promto'\n\n/**\n * Ask user a question and wait for an answer.\n * @param {string} question Question to present to the user\n * @return {Promise<string>} An answer from the user\n */\nexport default function ask(question, timeout) {\n  const rl = createInterface({\n    input: process.stdin,\n    output: process.stdout,\n  })\n  let rejectQuestion\n  const promise = new Promise((resolve, reject) => {\n    rejectQuestion = () => {\n      reject(new Error('Question was rejected')) // no pending promises\n    }\n    rl.question(question, (answer) => {\n      resolve(answer)\n    })\n  })\n  const p = timeout ? promto(promise, timeout, `reloquent: ${question}`) : promise\n  rl.promise = p.then(\n    (res) => {\n      rl.close()\n      rejectQuestion()\n      return res\n    },\n    (err) => {\n      rl.close()\n      rejectQuestion()\n      throw err\n    }\n  )\n  return rl\n}\n"],"file":"ask.js"}